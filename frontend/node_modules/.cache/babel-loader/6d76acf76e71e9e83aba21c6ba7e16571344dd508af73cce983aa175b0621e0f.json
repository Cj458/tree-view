{"ast":null,"code":"var _jsxFileName = \"/Users/caleb/Desktop/Projects/CRM/frontend/src/v3_search/tree-view.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useTreeState } from \"./TreeContext\";\nimport EmployeeList from \"./EmployeeList\";\nimport { fetchEmployees } from \"../data\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TreeNode = _ref => {\n  _s();\n  let {\n    node\n  } = _ref;\n  const {\n    dispatch\n  } = useTreeState();\n  const [employees, setEmployees] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const handleToggle = async () => {\n    dispatch({\n      type: \"TOGGLE_NODE\",\n      id: node.id,\n      isExpanded: !node.isExpanded\n    });\n    if (!node.isExpanded) {\n      const data = await fetchEmployees(node.id, 1);\n      setEmployees(data.results);\n      setHasMore(data.next !== null);\n      setCurrentPage(1);\n    }\n  };\n  const loadMore = async () => {\n    const data = await fetchEmployees(node.id, currentPage + 1);\n    setEmployees(prev => [...prev, ...data.results]);\n    setHasMore(data.next !== null);\n    setCurrentPage(prev => prev + 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tree-node\",\n    children: [node.children && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleToggle,\n      className: \"toggle-icon\",\n      children: node.isExpanded ? \"⮝\" : \"⮟\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: node.isHighlight ? \"highlight\" : \"\",\n      children: node.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), node.isExpanded && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TreeView, {\n        data: node.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(EmployeeList, {\n        employees: employees,\n        loadMore: loadMore,\n        hasMore: hasMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(TreeNode, \"4Lu4qxYzuPFPZjSvfkInUROcYbc=\", false, function () {\n  return [useTreeState];\n});\n_c = TreeNode;\nconst TreeView = _ref2 => {\n  let {\n    data\n  } = _ref2;\n  if (!Array.isArray(data)) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tree-view\",\n    children: data.map(node => /*#__PURE__*/_jsxDEV(TreeNode, {\n      node: node\n    }, node.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_c2 = TreeView;\nexport default TreeView;\nvar _c, _c2;\n$RefreshReg$(_c, \"TreeNode\");\n$RefreshReg$(_c2, \"TreeView\");","map":{"version":3,"names":["React","useState","useTreeState","EmployeeList","fetchEmployees","jsxDEV","_jsxDEV","Fragment","_Fragment","TreeNode","_ref","_s","node","dispatch","employees","setEmployees","currentPage","setCurrentPage","hasMore","setHasMore","handleToggle","type","id","isExpanded","data","results","next","loadMore","prev","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","isHighlight","name","TreeView","_c","_ref2","Array","isArray","map","_c2","$RefreshReg$"],"sources":["/Users/caleb/Desktop/Projects/CRM/frontend/src/v3_search/tree-view.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useTreeState } from \"./TreeContext\";\r\nimport EmployeeList from \"./EmployeeList\";\r\nimport { fetchEmployees } from \"../data\";\r\n\r\nconst TreeNode = ({ node }) => {\r\n  const { dispatch } = useTreeState();\r\n  const [employees, setEmployees] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  const handleToggle = async () => {\r\n    dispatch({\r\n      type: \"TOGGLE_NODE\",\r\n      id: node.id,\r\n      isExpanded: !node.isExpanded,\r\n    });\r\n    if (!node.isExpanded) {\r\n      const data = await fetchEmployees(node.id, 1);\r\n      setEmployees(data.results);\r\n      setHasMore(data.next !== null);\r\n      setCurrentPage(1);\r\n    }\r\n  };\r\n\r\n  const loadMore = async () => {\r\n    const data = await fetchEmployees(node.id, currentPage + 1);\r\n    setEmployees((prev) => [...prev, ...data.results]);\r\n    setHasMore(data.next !== null);\r\n    setCurrentPage((prev) => prev + 1);\r\n  };\r\n\r\n  return (\r\n    <div className=\"tree-node\">\r\n      {node.children && (\r\n        <button\r\n          onClick={handleToggle}\r\n          className=\"toggle-icon\"\r\n        >\r\n          {node.isExpanded ? \"⮝\" : \"⮟\"}\r\n        </button>\r\n      )}\r\n      <span className={node.isHighlight ? \"highlight\" : \"\"}>{node.name}</span>\r\n      {node.isExpanded && (\r\n        <>\r\n          <TreeView data={node.children} />\r\n          <EmployeeList employees={employees} loadMore={loadMore} hasMore={hasMore} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TreeView = ({ data }) => {\r\n  if (!Array.isArray(data)) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"tree-view\">\r\n      {data.map((node) => (\r\n        <TreeNode key={node.id} node={node} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TreeView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}